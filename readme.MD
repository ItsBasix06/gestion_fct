# ðŸ“‚ Gestion FCT: GestiÃ³n Integral de PrÃ¡cticas
## ðŸ‘¥ Proyecto Realizado por Basi CÃ³rdoba Arcas y Javier GÃ³mez-Comino.

Bienvenido a **Gestion FCT**, una aplicaciÃ³n web desarrollada en **Django** diseÃ±ada para simplificar la experiencia de las prÃ¡cticas profesionales. Este proyecto nace con el objetivo de modernizar el tradicional "cuaderno de prÃ¡cticas" en papel tipico que solemos llevar cada cierto tiempo, ofreciendo una plataforma centralizada donde alumnos, tutores y empresas convergen y asi evitamos el transporte de una ciudad a otro,haciendolo todo digital.




core/
â”‚
â”œâ”€â”€ static/                <-- Requisito: Ficheros estÃ¡ticos [cite: 106-108]
â”‚   â””â”€â”€ core/
â”‚       â”œâ”€â”€ css/
â”‚       â”‚   â””â”€â”€ estilos.css  <-- Tu CSS propio
â”‚       â””â”€â”€ img/
â”‚           â””â”€â”€ logo.png     <-- Una de las 3 imÃ¡genes
â”‚
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ base.html          <-- El diseÃ±o principal (Bootstrap)
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ home.html      <-- Portada
â”‚   â”‚   â””â”€â”€ contacto.html  <-- Formulario forms.Form
â”‚   â””â”€â”€ registration/      <-- Carpetas estÃ¡ndar de Django
â”‚       â”œâ”€â”€ login.html     <-- Formulario de login
â”‚       â””â”€â”€ signup.html    <-- Formulario de registro
â”‚
â”œâ”€â”€ forms.py               <-- AquÃ­ va el ContactoForm
â”œâ”€â”€ views.py               <-- Vistas para home, contacto y registro
â””â”€â”€ urls.py                <-- Rutas: '', 'contacto/', 'registro/'



practicas/
â”‚
â”œâ”€â”€ migrations/          <-- (Se crea solo) Historial de cambios en la BD
â”‚
â”œâ”€â”€ static/              <-- Archivos especÃ­ficos de esta app
â”‚   â””â”€â”€ practicas/
â”‚       â””â”€â”€ css/         <-- (Opcional) Si quieres estilos solo para el diario
â”‚
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ practicas/       <-- IMPORTANTE: Subcarpeta con el nombre de la app
â”‚       â”œâ”€â”€ lista_entradas.html  <-- Ver tu diario
â”‚       â”œâ”€â”€ form_entrada.html    <-- Crear/Editar entrada (Crispy Forms)
â”‚       â””â”€â”€ lista_empresas.html  <-- Ver empresas y tutores
â”‚
â”œâ”€â”€ admin.py             <-- Para que el profesor vea los datos en el panel
â”œâ”€â”€ apps.py              <-- ConfiguraciÃ³n (no se toca apenas)
â”œâ”€â”€ forms.py             <-- Â¡Clave! AquÃ­ va el ModelForm con Crispy
â”œâ”€â”€ models.py            <-- Ya lo tienes (Empresa, Tutor, EntradaDiario)
â”œâ”€â”€ urls.py              <-- Tus rutas (ej: /diario/nueva)
â”œâ”€â”€ views.py             <-- La lÃ³gica (guardar datos, validaciones)
â””â”€â”€ tests.py             <-- (No se pide en la rÃºbrica, puedes ignorarlo)




from django.db import models
from django.contrib.auth.models import User  # Importamos el modelo de usuario de Django




# --- MODELO 1: EMPRESA ---
# Cumple con: CharField y BooleanField [cite: 56]
class Empresa(models.Model):
    nombre = models.CharField(max_length=100, verbose_name="Nombre de la empresa")
    telefono = models.CharField(max_length=15, verbose_name="TelÃ©fono de contacto")
    direccion = models.CharField(max_length=200, verbose_name="DirecciÃ³n", blank=True, null=True)
    
    # Requisito: BooleanField (Check de si hay convenio)
    convenio_firmado = models.BooleanField(default=True, verbose_name="Â¿Convenio activo?")

    # Requisito: MÃ©todo __str__ [cite: 57]
    def __str__(self):
        return self.nombre

# --- MODELO 2: TUTOR ---
# Cumple con: ForeignKey (RelaciÃ³n 1 a N) [cite: 53]
class Tutor(models.Model):
    nombre = models.CharField(max_length=100, verbose_name="Nombre del tutor")
    email = models.EmailField(verbose_name="Correo electrÃ³nico", blank=True)
    cargo = models.CharField(max_length=100, verbose_name="Cargo en la empresa", blank=True)
    
    # RelaciÃ³n: Una empresa tiene muchos tutores
    # on_delete=models.CASCADE: Si borras la empresa, se borran sus tutores.
    empresa = models.ForeignKey(Empresa, on_delete=models.CASCADE, related_name="tutores")

    def __str__(self):
        return f"{self.nombre} ({self.empresa.nombre})"

# --- MODELO 3: ENTRADA DEL DIARIO ---
# Cumple con: DateField y TextField [cite: 56]
class EntradaDiario(models.Model):
    # RelaciÃ³n: Un alumno tiene muchas entradas
    alumno = models.ForeignKey(User, on_delete=models.CASCADE)
    
    # Requisito: DateField
    fecha = models.DateField(verbose_name="Fecha de la prÃ¡ctica")
    
    # Campo numÃ©rico para las horas
    horas = models.DecimalField(max_digits=4, decimal_places=2, help_text="Ejemplo: 6.5")
    
    # Requisito: TextField (Texto largo para explicar las tareas)
    tareas = models.TextField(verbose_name="Tareas realizadas")
    
    observaciones = models.TextField(blank=True, null=True, verbose_name="Observaciones / Aprendizaje")
    
    # Campo oculto para ordenar por fecha de creaciÃ³n real
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        ordering = ['-fecha']  # Ordena las entradas de la mÃ¡s reciente a la mÃ¡s antigua
        verbose_name = "Entrada del Diario"
        verbose_name_plural = "Entradas del Diario"

    def __str__(self):
        return f"PrÃ¡ctica del {self.fecha} - {self.alumno.username}"
        
# --- MODELO 4: ALUMNOS ---   
class Alumno(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    dni = models.CharField(max_length=9)
    ciclo = models.CharField(max_length=50, default="2Âº DAW")
    
# --- AQUÃ ESTÃN LAS FOREIGN KEYS QUE FALTABAN ---
    
# RelaciÃ³n: Un alumno hace prÃ¡cticas en UNA empresa

    empresa_asignada = models.ForeignKey(Empresa, on_delete=models.PROTECT, verbose_name="Empresa de FCT")
    
# RelaciÃ³n: Un alumno tiene UN tutor laboral asignado
    tutor_asignado = models.ForeignKey(Tutor, on_delete=models.PROTECT, verbose_name="Tutor Laboral")

    def __str__(self):
        return f"{self.user.username} - {self.empresa_asignada.nombre}"





# from django.db import models

class MensajeContacto(models.Model):
    nombre = models.CharField(max_length=100, verbose_name="Nombre del remitente")
    email = models.EmailField(verbose_name="Correo de contacto")
    asunto = models.CharField(max_length=200)
    contenido = models.TextField(verbose_name="Mensaje")
    
    # Fecha automÃ¡tica para saber cuÃ¡ndo lo enviaron
    fecha_envio = models.DateTimeField(auto_now_add=True)

    class Meta:
        verbose_name = "Mensaje de Contacto"
        verbose_name_plural = "Mensajes de Contacto"
        ordering = ['-fecha_envio'] # Los mÃ¡s nuevos primero

    def __str__(self):
        return f"Mensaje de {self.nombre} - {self.asunto}"


# from django.contrib import admin
from .models import Producto

class ProductoAdmin(admin.ModelAdmin):
    list_display = ("nombre", "precio")  # Columnas que se ven
    search_fields = ("nombre",)          # Barra de bÃºsqueda

admin.site.register(Producto, ProductoAdmin)
