{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gestor FCT</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="{% static 'core/css/estilos.css' %}" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
</head>
<body class="d-flex flex-column min-vh-100 bg-light">

<div class="container-fluid pt-3 pb-3 px-4 d-flex justify-content-between align-items-center bg-white shadow-sm">

    <a href="{% url 'home' %}" class="d-flex align-items-center text-decoration-none">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" width="45" height="45" class="me-2">
            <circle cx="100" cy="100" r="95" fill="#0d6efd" opacity="0.1" />
            <rect x="50" y="40" width="100" height="120" rx="8" fill="#0d6efd" />
            <rect x="55" y="45" width="90" height="110" rx="6" fill="#ffffff" />
            <line x1="70" y1="70" x2="130" y2="70" stroke="#0d6efd" stroke-width="3" stroke-linecap="round" opacity="0.6" />
            <line x1="70" y1="85" x2="130" y2="85" stroke="#0d6efd" stroke-width="3" stroke-linecap="round" opacity="0.6" />
            <line x1="70" y1="100" x2="110" y2="100" stroke="#0d6efd" stroke-width="3" stroke-linecap="round" opacity="0.6" />
            <rect x="60" y="115" width="80" height="50" rx="4" fill="#198754" />
            <rect x="65" y="120" width="70" height="40" rx="3" fill="#20c997" />
            <path d="M 85 115 Q 85 105, 95 105 Q 105 105, 105 115" stroke="#198754" stroke-width="4" fill="none" stroke-linecap="round" />
            <rect x="95" y="135" width="10" height="15" rx="2" fill="#ffffff" opacity="0.8" />
            <line x1="75" y1="125" x2="75" y2="155" stroke="#198754" stroke-width="2" opacity="0.3" />
            <line x1="125" y1="125" x2="125" y2="155" stroke="#198754" stroke-width="2" opacity="0.3" />
            <circle cx="140" cy="60" r="18" fill="#198754" />
            <path d="M 132 60 L 137 66 L 148 54" stroke="#ffffff" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        <span class="fs-3 fw-bold text-primary" style="letter-spacing: -1px;">Gestor FCT</span>
    </a>

    <button class="hamburger-btn d-md-none"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#mobileMenuCollapse"
            aria-controls="mobileMenuCollapse"
            aria-expanded="false"
            aria-label="Abrir menú">
        <i class="bi bi-list fs-2 text-primary"></i>
    </button>

    <div class="nav-pill-container d-none d-md-flex">
        <a href="{% url 'home' %}" class="btn-nav-text {% if request.resolver_match.url_name == 'home' %}active{% endif %}">Inicio</a>
        {% if user.is_authenticated %}
        <a href="{% url 'diario_list' %}" class="btn-nav-text {% if 'diario' in request.resolver_match.url_name %}active{% endif %}">Diario</a>
        <a href="{% url 'empresa_list' %}" class="btn-nav-text {% if 'empresa' in request.resolver_match.url_name %}active{% endif %}">Empresas</a>
        <a href="{% url 'tutor_list' %}" class="btn-nav-text {% if 'tutor' in request.resolver_match.url_name %}active{% endif %}">Tutor</a>
        <form id="logout-form" action="{% url 'logout' %}" method="post" style="display:none;">{% csrf_token %}</form>
        <a href="#" onclick="document.getElementById('logout-form').submit();" class="btn-nav-text text-warning">Salir</a>
        {% else %}
        <a href="{% url 'about' %}" class="btn-nav-text {% if request.resolver_match.url_name == 'about' %}active{% endif %}">Quiénes Somos</a>
        <div class="btn-ui-container"><a href="{% url 'login' %}" class="btn-ui">Iniciar Sesión</a></div>
        <div class="btn-ui-container ms-2"><a href="{% url 'registro' %}" class="btn-ui">Registrarse</a></div>
        {% endif %}
    </div>
</div>

<div class="collapse d-md-none" id="mobileMenuCollapse">
    <div class="mobile-menu-body">
        <a href="{% url 'home' %}" class="mobile-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}">
            <i class="bi bi-house-fill"></i> Inicio
        </a>
        {% if user.is_authenticated %}
        <a href="{% url 'diario_list' %}" class="mobile-link {% if 'diario' in request.resolver_match.url_name %}active{% endif %}">
            <i class="bi bi-journal-text"></i> Diario
        </a>
        <a href="{% url 'empresa_list' %}" class="mobile-link {% if 'empresa' in request.resolver_match.url_name %}active{% endif %}">
            <i class="bi bi-building"></i> Empresas
        </a>
        <a href="{% url 'tutor_list' %}" class="mobile-link {% if 'tutor' in request.resolver_match.url_name %}active{% endif %}">
            <i class="bi bi-person-badge"></i> Tutor
        </a>
        <form id="logout-form-m" action="{% url 'logout' %}" method="post" style="display:none;">{% csrf_token %}</form>
        <a href="#" onclick="document.getElementById('logout-form-m').submit();" class="mobile-link mobile-link-warning">
            <i class="bi bi-box-arrow-right"></i> Salir
        </a>
        {% else %}
        <a href="{% url 'about' %}" class="mobile-link {% if request.resolver_match.url_name == 'about' %}active{% endif %}">
            <i class="bi bi-info-circle"></i> Quiénes Somos
        </a>
        <div class="px-4 pb-3 pt-2 d-flex flex-column gap-2">
            <a href="{% url 'login' %}" class="btn btn-primary rounded-pill fw-bold">Iniciar Sesión</a>
            <a href="{% url 'registro' %}" class="btn btn-outline-primary rounded-pill fw-bold">Registrarse</a>
        </div>
        {% endif %}
    </div>
</div>

<div class="container flex-grow-1 mt-4">
    {% if messages %}
    <div class="container mt-4 reveal reveal-1">
        <div class="row justify-content-center">
            <div class="col-md-8">
                {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show shadow-sm border-0 d-flex align-items-center" role="alert">
                    {% if message.tags == 'success' %}
                    <i class="bi bi-check-circle-fill text-success fs-4 me-3"></i>
                    {% elif message.tags == 'error' %}
                    <i class="bi bi-exclamation-triangle-fill text-danger fs-4 me-3"></i>
                    {% else %}
                    <i class="bi bi-info-circle-fill text-info fs-4 me-3"></i>
                    {% endif %}
                    <strong class="me-2">¡Listo!</strong> {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}
    {% block content %}{% endblock %}
</div>

<footer>
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-4">
                <a href="{% url 'home' %}" class="d-flex align-items-center mb-3 text-decoration-none footer-brand">
                    <span class="fs-4">Gestor FCT</span>
                </a>
                <p class="text-muted small pe-lg-5">Tu plataforma digital para el seguimiento y control de las Prácticas en Centros de Trabajo.</p>
                <div class="d-flex gap-3 mt-4">
                    <a href="#" class="text-muted fs-5"><i class="bi bi-github"></i></a>
                    <a href="#" class="text-muted fs-5"><i class="bi bi-linkedin"></i></a>
                    <a href="#" class="text-muted fs-5"><i class="bi bi-twitter-x"></i></a>
                </div>
            </div>
            <div class="col-6 col-lg-3 offset-lg-1">
                <h5 class="footer-heading">Navegación</h5>
                <a href="{% url 'home' %}" class="footer-link">Inicio</a>
                <a href="{% url 'about' %}" class="footer-link">Quiénes Somos</a>
            </div>
            <div class="col-12 col-lg-4">
                <div class="footer-help-box">
                    <h5 class="footer-heading mb-3" style="color: #495057;">¿Necesitas ayuda?</h5>
                    <p class="small text-muted mb-4">¿Tienes problemas con el registro o dudas sobre tus prácticas?</p>
                    <a href="mailto:soporte@gestorfct.com" class="btn-mini-contact">
                        <i class="bi bi-envelope-fill me-2"></i>Contactar Tutor
                    </a>
                </div>
            </div>
        </div>
        <hr class="mt-5 mb-4" style="opacity: 0.05;">
        <div class="row align-items-center">
            <div class="col-md-6 text-center text-md-start">
                <p class="mb-0 small text-muted">© 2026 Gestión FCT. Todos los derechos reservados.</p>
            </div>
            <div class="col-md-6 text-center text-md-end">
                <p class="mb-0 small text-muted">Desarrollado con ❤️ y Django.</p>
            </div>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'core/js/main.js' %}"></script>
</body>
</html>
